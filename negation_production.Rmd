---
title             : "The production of negation in parents' and children's speech"
shorttitle        : "Child and Parent Production of Negation"

author: 
  - name          : "First Author"
    affiliation   : "1"
    corresponding : yes    # Define only one corresponding author
    address       : "Postal address"
    email         : "my@email.com"
  - name          : "Ernst-August Doelle"
    affiliation   : "1,2"

affiliation:
  - id            : "1"
    institution   : "Wilhelm-Wundt-University"
  - id            : "2"
    institution   : "Konstanz Business School"

authornote: |
  Add complete departmental affiliations for each author here. Each new line herein must be indented, like this line.

  Enter author note here.

abstract: |
  this is the abstract
  
  <!-- https://tinyurl.com/ybremelq -->
  
keywords          : "keywords"
wordcount         : "X"

bibliography      : ["r-references.bib"]

floatsintext      : no
figurelist        : no
tablelist         : no
footnotelist      : no
linenumbers       : yes
mask              : no
draft             : no

documentclass     : "apa6"
classoption       : "man"
output            : papaja::apa6_pdf
---

```{r setup, include = FALSE}
library("papaja")
library(devtools)
library(childesr)
library(tidyverse)
library(tm)
library(forcats)
```

# Introduction

Claim: Children start producing all types of English negation by age 18 months and by 36 months, they produce them at the rate parents do.
  types of negation in English: no, verbal (not, nt), lexical (nothing, nobody, nowhere, none, un-in-de-dis-).
  
Study 1 Questions
* What is the overall trajectory of negative forms in child production?
    * Does the development of negation follow a no > not > nt cline? (Cameron-faulkner et al)
    * How many children are found to produce no/not/nt at each age?
* Do positive variants of the negative constructions exist too?
    * Are early “can’t" and “don’t" examples unanalyzed wholes? (Klima & Bellugi 1966; Bloom 1970) Do children produce “can’t” and “don’t” before using “do” and “can”?
* Proportion of no vs. not vs. nt broken down by mean length of utterance
    * instead of age, put mean length of utterance on the x axis?

Study 2 Questions
* What are early constructions?
    * the response may differ based on annotation level
* Do children’s early negative utterances differ so much from those used by adults? (Thornton & Tesan 2013)
    * How common are ungrammatical non-adult like combinations?
        * How many pre-sentential negation? (NEG + Subject + Predicate)
            * How many sentence internal? (Subj + NEG + Predicate)
        * Is negation external at the beginning? (appear before subjects) Does a NEG + S schema mark the beginning of negation? (McNeill & McNeill)
        * How many are optional infinitive: it not fit in here, it don’t fit in here?
    * control MLU: which forms are common among 1/2/3/… word utterances?
    * exclude single “no” (as well as anaphoric no) utterances from “no + more words” 
* What is anaphoric negation negating?
* How productive are early forms of negation?
    * average neg + #WORD per child as measure of productivity

## Previous Studies

Formal and functional development of negation

## Current Study

Acquisition of negation should concern itself with two notions: 1. negative morpheme 2. compositional complexity. By negative morpheme, we mean the kinds of morphemes that at each stage of acquisition are mapped to negative meanings. English has adverbal and adnominal mophemes that encode the concept of negation. We can look at how each form-meaning mapping emerges in children's development. Second by compositional complexity, we mean the types of elements that each morphemes succesfully negates at each stage of development. Under stuch analysis negation may have been successfully acquired to operate on locative elements but not identity relations. Compositional complexity of negation at each stage also helps us understand how quickly children generalize the function of negation beyond specific arguments it takes in the child's input.

# Study 1: Large-scale metrics

## Methods

For samples of parents' and children's speech, we used the online database [childes-db](childes-db.stanford.edu) and its associated R programming package `childesr` [@sanchez2018childes]. Childes-db is an online interface to the child language components of [TalkBank](https://talkbank.org/), namely [CHILDES](https://childes.talkbank.org/) [@macwhinney2000childes] and [PhonBank](https://phonbank.talkbank.org/). Two collections of corpora were selected: English-North America and English-UK. 

### Procedure

All word tokens were tagged for the following information: 1. The speaker role (parent vs. child), 2. the age of the child when the word was produced, 3. the type of the utterance the word appeared in (declarative, question, imperative, other)[^1], 4. whether the word was positive or negative, and 5. the type of negative word produced. For this study we considerd the following classes of negative words in English: the words *no* and *not*, the negative clitic auxiliary forms with *nt* (*ain't*, *isn't*, *amn't*, *aren't*, *wasn't*, *weren't*, *don't*, *doesn't*, *didn't*, *won't*, *shan't*, *hasn't*, *havn't*, *hadn't*, *shouldn't*, *can't*, *couldn't*, *may'nt*, *might'nt*, *would'nt*, and *mustn't*), negative quantifiers or adverbs of frequency (*nothing*, *nobody*, *nowhere*, *no-one*, *none*, *never*), as well as derivational negative forms with morphemes *un-* (e.g. unhappy), *in-* (e.g. invisible), *dis-*(e.g. disappear), *de-* (e.g. defrost), *non-* (e.g. nonsense), and *-less* (e.g. careless).

[^1]: This study grouped utterance types into four main categories: "declarative", "question", "imperative", and "other". Utterance type categorization followed the convention used in the [TalkBank manual](https://talkbank.org/manuals/CHAT.html#_Toc486414422). The utterance types are similar to sentence types (declarative, interrogative, imperative) with one exception: the category "question" consists of interrogatives as well as rising declaratives (i.e. declaratives with rising question intonation). In the transcripts, declaratives are marked with a period, questions with a question mark, and imperatives with an exclamation mark. It is important to note that the manual also provides [terminators for special-type utterances](https://talkbank.org/manuals/CHAT.html#_Toc486414431). Among the special type utterances, this study included the following in the category "questions": trailing off of a question, question with exclamation, interruption of a question, and self-interrupted question. The category imperatives also included "emphatic imperatives". The rest of the special type utterances such as "interruptions" and "trailing off" were included in the category "other".

### Exclusion Criteria

First, unintelligible tokens were excluded (N = `r format(exclusions$Unintelligible, big.mark=",")`). Second, tokens that had missing information on children's age were excluded (N = `r format(exclusions$missing, big.mark=",")`). Third, tokens outside the age range of 1 to 6 years were excluded (N = `r format(exclusions$age_ex, big.mark=",")`). The collection contained the speech of `r exclusions$n_children` children and their parents after the exclusions.

## Results

```{r negationProportionPlot}
negative_proportions %>%
  ggplot(aes(age,percent)) +
  geom_point(aes(color=category, shape=category)) +
  geom_line(aes(color=category)) +
  scale_x_continuous(breaks=seq(0, 72, by = 6)) +
  theme_classic()
```


## Conclusions

# Study 2: Early Productions

```{r}

#english_negation <- get_utterances(language = "eng", age = c(0,24), role = "Target_Child")


#count_types <- function(string){
#  n <- nlevels(as.factor(unlist(strsplit(string, " "))))
#  return(n)
#}

#count_tokens <- function(string){
#  n <- unlist(strsplit(string, " "))
#  return(length(n))
#}

#english_negation <-
#  english_negation %>%
#  filter(grepl('^no | no | no$|^not | not | not$|n\'t', gloss)) %>%
#  filter(!grepl('not yet transcribed need to fix', gloss)) %>%
#  mutate(clean_utterances = removeWords(gloss, c("xxx ?", "yyy ?", "um ?", "uh ?", "oh ?", "ah ?", "n ?"))) %>%
#  mutate(can = grepl('^can | can | can$|cannot|can\'t', clean_utterances)) %>%
#  mutate(do = grepl('^do | do | do$|don\'t', clean_utterances)) %>%
#  mutate(want = grepl('^want | want | want$', clean_utterances))%>%
#  mutate(n_types_clean = unlist(lapply(clean_utterances, count_types))) %>%
#  mutate(n_tokens_clean = unlist(lapply(clean_utterances, count_tokens))) %>%
#  mutate(type_token_ratio = n_types_clean/n_tokens_clean)

#write.csv(english_negation, file="raw_data/eng_negation_undertwo.csv")

```

```{r}
undertwo_neg <- read.csv("raw_data/eng_negation_undertwo.csv")

undertwo_neg[order(undertwo_neg$target_child_age),]
```


```{r population}
undertwo_neg$speaker_id %>%
  unique() %>% length()
```


Participant information:
1. what is the distribution of words per participant?
2. what proportion of children in each monthly age bin produce negative morphemes?

Filtering Process: (In parentheses I haven't done yet)
1. New column (condensed_p_o_s) transformations: 
  nouns, proper nouns, pronouns -> n
  (no -> no (replacing co/qn); haven't done this yet)
  all types of adverbs and determiners condensed to adv and det respectively
  (no n n -> no v n: 
    no cockle me
    no hug baby
    no it’s yours
    no brush hair
    no ride horsie
    no stop it
    no help me
    no spin it
    no touch Lastname
    no pop weasel
    no play toys
    no pinch that
    no hold it)
  (no n n -> no n v:
    no Mommy Humm
    no mummy sneeze
    no phone talk
    no everybody fall
    no hair wash)
  (no n n -> no adj n: 
    no tomato soup
    no clam chowder
    no Pat’s hat
    no ice pop)
2. filtered to constructions that occur at least 10 times
3. filtered out "no", "no no", "no no no", "no no no no", and ""


```{r construction}
undertwo_neg <- undertwo_neg %>%
  mutate(condensed_p_o_s = 
           (part_of_speech %>%
              str_replace_all(c('co|qn'), 'no') %>%
              str_replace_all(c('pro:\\w*|n:prop'), 'n') %>%
              str_replace_all('neg', 'not') %>%
              str_replace_all('adv:\\w*', 'adv') %>%
              str_replace_all('det:\\w*', 'det')
             )
           )
constructions <- plyr::count(undertwo_neg$condensed_p_o_s) %>%
  arrange(desc(freq))

filtered_constructions <- constructions %>%
  filter(freq>10, x!="no", x!="no no", x!="no no no", x!="no no no no", x!="")

filtered_constructions %>%
  ggplot(aes(reorder(x, -freq), freq)) + 
  geom_bar(stat = "identity") +
  theme_classic() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

undertwo_neg %>%
  filter(condensed_p_o_s %in% filtered_constructions$x) %>%
  # Order by mean or median? or frequency?
  group_by(condensed_p_o_s) %>%
  mutate(mean_by_construction = median(target_child_age)) %>%
  arrange(mean_by_construction) %>%
  ungroup(condensed_p_o_s) %>%
  mutate(condensed_p_o_s = fct_reorder(condensed_p_o_s, mean_by_construction)) %>%
  ggplot(mapping = aes(x =condensed_p_o_s, y =target_child_age)) +
  #geom_boxplot(color = 'red')+
  geom_jitter(size = .5, width = .2) +
  stat_summary(geom = "crossbar", width=0.65, fatten=2, color="red", fun.data = function(x){ return(c(y=median(x), ymin=median(x), ymax=median(x))) })+
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

#filter(undertwo_neg, condensed_p_o_s == 'no n v')$clean_utterances %>%
#unique()

# 12; and based on the graph it's late
# Even counting utterances containing 'no n v' only like 50 
# constructions %>%
  #filter(x == 'no n v')

#3495
#sum(constructions$freq)
```


```{r}

length(filter(undertwo_neg, can)$clean_utterances)
length(filter(undertwo_neg, do)$clean_utterances)
length(filter(undertwo_neg, want)$clean_utterances)

filter(undertwo_neg, grepl('don\'t want', clean_utterances))$clean_utterances %>%
  length()

filter(undertwo_neg, condensed_p_o_s == "no n")$clean_utterances %>%
  length()

no_simple <- c("no adv", "no adj", "no v")

filter(undertwo_neg, condensed_p_o_s %in% no_simple)$clean_utterances %>%
  length()

filter(undertwo_neg, condensed_p_o_s == "not n")$clean_utterances %>%
  length()

not_simple <-  c("not adv", "not adj", "not v")

filter(undertwo_neg, condensed_p_o_s %in% not_simple)$clean_utterances %>%
  length()

```


|Abbreviation     | Meaning       |
|-----------------|---------------|
| n               | noun (includes pronouns and proper nouns) |
| v               | verb          |
| adj             | adjective     |
| adv             | adverb        |
| prep            | preposition   |
| det             | determiner    |
| part            | participle    |
| mod             | modal         | 


| Construction    | Frequency | Examples                           | Negation Categories  |
|-----------------|-----------|------------------------------------|----------------------|
| no n            | 455       | no baby, no horsie, no juice       | Existence, Desire, Metalinguistic? |
| mod v n         | 142       | don't touch that, don't fit car, can't open it|           |
| n mod v n       | 90        | I don't want juice, I can't find duck, cow won't go Mama| |
| no no n  OOPS   | 83        | PROBLEM HERE no more stuff, *no car, no no pram, #no like doggy  |    |
| mod             | 74        | don't, can't                       |                      |
| n mod v         | 73        | I don't know, they don't fit, I can't open|               |
| mod v           | 67        | don't go, doesn't work, can't catch|                      |
| no n n          | 63        | no baby bubble, no this one, *no brush hair|              |
| n mod           | 55        | I can't, Jane doesn't, mine didn't |                      |
| not n           | 39        | not noodle, not home, not right    |                      |
| no v            | 38        | no read, no pooped,  *no zipper    |                      |
| no v n          | 33        | no sit chair, no have cracker, no eat milk |              |
| not adv         | 30        | not today, not there, *not asleep  |                      |
| n no            | 25        | mammy no, apple no, train no       |                      |
| no adv          | 24        | no there, no up, no behind         |                      |
| no n n n        | 24        | no night night moon, no mummy this side, *no hold daddy hand |                |
| mod v n n       | 22        | don't eat skin part, (?) don't touch that book, *can't find bunny rabit  | |
| no prep n       | 19        | no in tree, no with this, *no like bubbles|               |
| n mod v prep    | 17        | I don't want to, Laura don't want to|                     |
| mod n           | 15        | can't tea, don't Mommy, didn't I   |                      |
| n v no          | 15        | doll sit no, I take no, Joana say no|                     |
| no n v n        | 15        | no car go car, no comb want brush, no mummy do it |       |
| not adj         | 15        | not good, not dirty, not real      |                      |
| not det n       | 15        | not my car, not a cat, not a white |                      |
| not v n         | 15        | not eat rocks, not have coffee, not green one|            |
| no det n        | 13        | no my turn, no a cow, no the hammer|                      |
| not v           | 13        | not shush, not work, not blanket   |                      |
| mod v adv       | 12        | can't come in, don't fall down, doesn't fit here|         |
| no n adv        | 12        | no jacket on, no monkey there, *no lie down  |            |
| no n v          | 12        | no mail came, no mummy go, no I wanted |                  |
| no part         | 12        | no bouncing, no eating, no hurting |                      |
| v no n n        | 12        | man no taste it (???)              |                      |
| n not n         | 11        | pizza not pizza, pizza not apples, that not knees|        |
| no adj          | 11        | no happy, no pretend, no brown     |                      |



| Semantic Category  | Frequency  | Examples  |
|--------------------|------------|-----------|
| Do                 |  666       | don't like it, I don't feel good, no do it Mummy|
| No noun            |  455       | no baby, no horsie, no juice  |
| Ability (can)      |  212       | I can't find a blankie, can't eat, no no I can not do |
| Desire (want)      |  148       | Don't want to, no comb want brush, no want the baby|
| Don't want         |  106       | I don't want juice, don't want it, Laura don't want to|
| No [simple thing]  |  73        | no go, no stupid, no now|
| Not [simple thing] |  58        | not bad, not write, not quite|
| Not noun           |  39        | not noodle, not Danny, not right|
| Presentential (Optimistic) |    | |
| Presentential (Pessimistic)| 12 | no Mommy read, no I wanted, no I sweep, no water go|

Notes on Semantic Categories:
- [simple thing] : adj, adv, v
- Presentential (Optimistic) = no n v, no n adv, 
- Presentential (Pessimistic) = no n v
  - all of these could be read as pronominal
    
```{r}
filter(undertwo_neg, part_of_speech == "qn n")$clean_utterances %>%
  unique

filter(undertwo_neg, part_of_speech == "qn qn n")$clean_utterances %>%
  unique

filter(undertwo_neg, part_of_speech == "co n")$clean_utterances %>%
  unique

filter(undertwo_neg, part_of_speech == "co n:prop")$clean_utterances %>%
  unique

filter(undertwo_neg, part_of_speech == "mod v pro:per")$clean_utterances %>%
  unique

filter(undertwo_neg, part_of_speech == "qn pro:indef")$clean_utterances %>%
  unique

filter(undertwo_neg, part_of_speech == "mod")$clean_utterances %>%
  unique

filter(undertwo_neg, part_of_speech == "pro:sub mod")$clean_utterances %>%
  unique

filter(undertwo_neg, part_of_speech == "mod v")$clean_utterances %>%
  unique

filter(undertwo_neg, part_of_speech == "mod v pro:dem")$clean_utterances %>%
  unique

filter(undertwo_neg, part_of_speech == "pro:sub mod v")$clean_utterances %>%
  unique

filter(undertwo_neg, part_of_speech == "co v")$clean_utterances %>%
  unique

filter(undertwo_neg, part_of_speech == "pro:sub mod v pro:per")$clean_utterances %>%
  unique

filter(undertwo_neg, part_of_speech == "neg adv")$clean_utterances %>%
  unique

filter(undertwo_neg, part_of_speech == "co v n")$clean_utterances %>%
  unique

```


```{r}
# Arbitrary, judgement-based distinction; how to actually split them up?
non_sentential <- c("qn n", "qn qn n", "co n", "co n:prop", "co v", "co n:prop n n", "n co", "neg n", "neg v", "co pro:pos")
sentential <- c("pro:sub mod v pro:per", "pro:sub mod v pro:dem", "pro:sub mod v prep", "pro:sub mod v n", "pro:sub mod v", "mod v pro:per", "mod v n", "mod v adv", "neg adv", "co adv")
ns_count <- filter(undertwo_neg, part_of_speech %in% non_sentential)$clean_utterances %>%
  length()
s_count <-  filter(undertwo_neg, part_of_speech %in% sentential)$clean_utterances %>%
  length()

```

```{r}
undertwo_neg %>%
  filter(part_of_speech!="co", part_of_speech!="co co", part_of_speech!="co co co", part_of_speech!="co co co co", part_of_speech!="co co co co co", part_of_speech!="co co co co co co", part_of_speech!="") %>%
  group_by(part_of_speech) %>%
  summarise(utterances = paste(clean_utterances, collapse =","))
```


```{r}
top30 <- filter(constructions, freq>10, x!="co", x!="co co", x!="co co co", x!="co co co co", x!="")$freq %>%
  sum()

all <- filter(constructions, x!="co", x!="co co", x!="co co co", x!="co co co co", x!="")$freq %>%
  sum()

top30/all
```


Susan's Questions:
Are you sure it is a quantifier or a marker of non-existence?
Check the difference between no+N and no-more+N
how about single "no"s?

To do:
1. cluster the most frequent categories
2. look at the age distribution for the cluster (what about the distribution of age in communicative function: nonexistence, nondesire, imperative)


## Participants

## Material

## Procedure

## Data analysis

# Results

```{r}
#freqTable_bySpeaker %>%
#  filter(negative_form!="pos") %>%
#ggplot(aes(speaker,ppt)) +
#  geom_bar(stat="identity", aes(fill=negative_form)) +
#  theme_classic()
```

# Discussion


\newpage

# References
```{r create_r-references}
r_refs(file = "r-references.bib")
```

\begingroup
\setlength{\parindent}{-0.5in}
\setlength{\leftskip}{0.5in}

<div id = "refs"></div>
\endgroup
